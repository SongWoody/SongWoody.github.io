{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/android_etc/Parcelize/","result":{"data":{"site":{"siteMetadata":{"title":"NiNyYoon"}},"markdownRemark":{"id":"e6f8ef79-e418-570d-a838-0274b1d186fd","excerpt":"Parcelize: Android 직렬화의 불편함을 해소 Parcelable은 안드로이드에서 객체를 효율적으로 직렬화하는 방법입니다. Serializable이 리플렉션을 사용해 런타임 오버헤드가 발생하는 것과 달리, Parcelable은 컴파일 시점(Compile Time…","html":"<h1>Parcelize: Android 직렬화의 불편함을 해소</h1>\n<p>Parcelable은 안드로이드에서 객체를 효율적으로 직렬화하는 방법입니다.<br>\nSerializable이 리플렉션을 사용해 런타임 오버헤드가 발생하는 것과 달리, Parcelable은 <strong>컴파일 시점(Compile Time)</strong> 에 코드를 변환하기 때문에 빠르고 런타임 오버헤드가 없습니다.</p>\n<p>그러나 Parcelable을 사용하려면 개발자가 직렬화를 위한 보일러플레이트(Boilerplate) 코드를 직접 작성해야 하는 불편함이 따랐습니다.</p>\n<p>이를 해결하기 위해 <strong>Parcelize 플러그인</strong>이 등장했습니다.</p>\n<p>Parcelize는 바이트코드로 변환되는 과정에 개입하여 @Parcelize 애너테이션 하나만 추가해도 필요한 모든 Parcelable 코드를 자동으로 생성해 줍니다. 이제 개발자는 수동으로 코드를 작성할 필요가 없습니다.</p>\n<p>이 포스트에서는 <code class=\"language-text\">@Parcelize</code>의 기본적인 사용법과, 개발자가 직접 수정할 수 없는 외부 Class를 직렬화하는 @TypeParceler 사용법을 알아보겠습니다.</p>\n<h1>프로젝트 설정</h1>\n<div class=\"gatsby-highlight\" data-language=\"kts\"><pre class=\"language-kts\"><code class=\"language-kts\"><span class=\"token comment\">// gradle(:app)</span>\nplugins <span class=\"token punctuation\">{</span> \n    <span class=\"token function\">id</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"kotlin-parcelize\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"kts\"><pre class=\"language-kts\"><code class=\"language-kts\"><span class=\"token comment\">// version catalog</span>\n\n<span class=\"token comment\">// libs.versions.toml</span>\n<span class=\"token punctuation\">[</span>plugins<span class=\"token punctuation\">]</span>\nkotlin<span class=\"token operator\">-</span>parcelize <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"org.jetbrains.kotlin.plugin.parcelize\"</span></span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// gradle(:app) </span>\nplugins <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alias</span><span class=\"token punctuation\">(</span>libs<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span>kotlin<span class=\"token punctuation\">.</span>parcelize<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>기본 사용법</h1>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> kotlinx<span class=\"token punctuation\">.</span>parcelize<span class=\"token punctuation\">.</span>Parcelize\n\n<span class=\"token annotation builtin\">@Parcelize</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> firstName<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> \n    <span class=\"token keyword\">val</span> lastName<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> \n    <span class=\"token keyword\">val</span> age<span class=\"token operator\">:</span> Int\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Parcelable</code></pre></div>\n<h1>지원 타입</h1>\n<ul>\n<li><strong>Primitive Types</strong> (and their boxed versions)\n<ul>\n<li>Int, Boolean, Long 등 (java.lang.Integer, java.lang.Boolean 등)</li>\n</ul>\n</li>\n<li><strong>Objects</strong> 과 <strong>enums</strong></li>\n<li><strong>String, CharSequence</strong></li>\n<li><strong>Exception</strong></li>\n<li>S<strong>ize, SizeF, Bundle, IBinder, IInterface, FileDescriptor</strong></li>\n<li><strong>SparseArray, SparseIntArray, SparseLongArray, SparseBooleanArray</strong></li>\n<li><strong>모든 Serializable (Date 포함), Parcelable 구현체</strong></li>\n<li><strong>지원 되는 모든 타입에 대한 Collections</strong>:\n<ul>\n<li><strong>List</strong> (내부적으로 ArrayList 로 처리하여 직렬화),</li>\n<li><strong>Set</strong> (내부적으로 LinkedHashSet 으로 처리하여 직렬화),</li>\n<li><strong>Map</strong> (내부적으로 LinkedHashMap 으로 처리하여 직렬화)</li>\n</ul>\n</li>\n<li><strong>지원 되는 모든 타입에 대한 Arrays</strong></li>\n<li><strong>지원 되는 모든 타입에 대한 Nullable</strong> (Int?, List<String>?)</li>\n</ul>\n<h1>Custom Parcele</h1>\n<p>Custom Parcele 은 <code class=\"language-text\">Pacelable</code> 인터페이스를 구현할 수 없는 타입을 Parcelable 객체에 포함시켜야할 때 사용됩니다.</p>\n<h4>Custom Parceler 사용 케이스</h4>\n<ul>\n<li><strong>외부/표준 라이브러리 타입 직렬화</strong>: 개발자가 수정할 수 없는 클레스(java.util.UUID 등)</li>\n<li><strong>커스텀 로직 사용</strong>: 객체의 내부 상태를 그대로 직렬화하는 대신, 특정 필드만 직렬화하거나, 직렬화 과정에서 데이터를 압축 또는 변환하는 등의 커스텀 로직이 필요할 때</li>\n</ul>\n<h4>Parceler 사용법</h4>\n<p><strong>Custom Parceler</strong>는 <code class=\"language-text\">kotlinx.parcelize.Parceler&lt;T></code> 인터페이스를 구현하여 정의합니다.<br>\n여기서 T는 직렬화하려는 타입입니다.</p>\n<h4>Parceler 인터페이스 정의</h4>\n<ul>\n<li><strong>create(parcel: Parcel)</strong>: T (역직렬화, 읽기): Parcel에서 데이터를 읽어와 객체 T의 인스턴스를 생성하고 반환합니다.</li>\n<li><strong>write(input: T, parcel: Parcel, flags: Int) (직렬화, 쓰기)</strong>: 객체 T의 인스턴스(input)를 Parcel에 기록합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// 외부 데이터 예시</span>\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">ExternalData</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> data1<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> data2<span class=\"token operator\">:</span> String\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Parceler 인터페이스 구현</span>\n<span class=\"token keyword\">object</span> ExternalParceler <span class=\"token operator\">:</span> Parceler<span class=\"token operator\">&lt;</span>ExternalData<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 1. [쓰기 / 직렬화]: ExternalData 객체를 Parcel에 기록</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> ExternalData<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>\n        parcel<span class=\"token operator\">:</span> Parcel<span class=\"token punctuation\">,</span>\n        flags<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// data1을 기록</span>\n        parcel<span class=\"token punctuation\">.</span><span class=\"token function\">writeString</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data1<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// data2를 기록 (순서 중요!)</span>\n        parcel<span class=\"token punctuation\">.</span><span class=\"token function\">writeString</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data2<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 2. [읽기 / 역직렬화]: Parcel에서 데이터를 읽어 ExternalData 객체 생성</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>parcel<span class=\"token operator\">:</span> Parcel<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ExternalData <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 쓴 순서와 정확히 일치하게 읽어야 합니다.</span>\n        <span class=\"token keyword\">val</span> data1 <span class=\"token operator\">=</span> parcel<span class=\"token punctuation\">.</span><span class=\"token function\">readString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?:</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span>\n        <span class=\"token keyword\">val</span> data2 <span class=\"token operator\">=</span> parcel<span class=\"token punctuation\">.</span><span class=\"token function\">readString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?:</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">ExternalData</span><span class=\"token punctuation\">(</span>data1<span class=\"token punctuation\">,</span> data2<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">@TypeParceler</code> 또는 <code class=\"language-text\">@WriteWith</code> 사용하여 Parcelable 클래스에 외부 클래스 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// @TypeParceler 을 Class에 적용</span>\n<span class=\"token annotation builtin\">@Parcelize</span>\n<span class=\"token annotation builtin\">@TypeParceler</span><span class=\"token operator\">&lt;</span>ExternalData<span class=\"token punctuation\">,</span> ExternalParceler<span class=\"token operator\">></span>\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> <span class=\"token keyword\">data</span><span class=\"token operator\">:</span> ExternalData<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Parcelable\n\n<span class=\"token comment\">// @TypeParceler 을 프로퍼티에 적용</span>\n<span class=\"token annotation builtin\">@Parcelize</span>\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation builtin\">@TypeParceler</span><span class=\"token operator\">&lt;</span>ExternalData<span class=\"token punctuation\">,</span> ExternalParceler<span class=\"token operator\">></span>\n    <span class=\"token keyword\">val</span> <span class=\"token keyword\">data</span><span class=\"token operator\">:</span> ExternalData<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Parcelable\n\n\n<span class=\"token comment\">// @WriteWith 을 사용하여 파라미터에 적용</span>\n<span class=\"token annotation builtin\">@Parcelize</span>\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> <span class=\"token keyword\">data</span><span class=\"token operator\">:</span> <span class=\"token annotation builtin\">@WriteWith</span><span class=\"token operator\">&lt;</span>ExternalParceler<span class=\"token operator\">></span> ExternalData<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Parcelable\n\n<span class=\"token comment\">//</span>\n</code></pre></div>\n<h1>@IgnoredOnParcel: 직렬화가 필요없는 프로퍼티 무시</h1>\n<p>@IgnoredOnParcel 은 Parcelable 객체 내의 특정 프로퍼티를 직렬화 및 역질렬화 과정에서 제외하고 싶을 때 사용합니다.<br>\n보통 클래스 필드, 위임(by) 나 Callback 같은 경우 Warning 으로 표시해 줍니다.</p>\n<p>사용 케이스</p>\n<ul>\n<li><strong>계산된 값일 경우</strong>: 클래스의 다른 필드를 기반으로 런타임에 계산되는 프로퍼티인 경우 (firname+lastname = fullname)</li>\n<li><strong>일시적인 상태</strong>: 유지될 필요가 없는 임시 상태(예: UI 상태, 캐시된 값 등)</li>\n<li><strong>직렬화 불가능 객체</strong>: Parceler로도 처리할 수 없는 복잡한 객체나 <strong>메모리 참조(예: 콜백 리스너, Context 등)</strong> 를 포함해야 할 때 사용</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Parcelize</span>\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> firstName<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> lastName<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation builtin\">@IgnoredOnParcel</span>\n    <span class=\"token keyword\">var</span> ignoredValue<span class=\"token operator\">:</span> String<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">// 직렬화 제외가 필요한 값 제외</span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> Parcelable <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token comment\">// (IgnoredOnParcel 을 사용하지 않아도 제외 됨)</span>\n    <span class=\"token comment\">// 계산된 값: 런타임에 계산되므로 Parcel에 기록할 필요가 없습니다.</span>\n    <span class=\"token annotation builtin\">@IgnoredOnParcel</span>\n    <span class=\"token keyword\">val</span> fullName<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">firstName</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">lastName</span></span><span class=\"token string\">\"</span></span>\n    \n    <span class=\"token comment\">// (IgnoredOnParcel 을 사용하지 않아도 제외 됨)</span>\n    <span class=\"token comment\">// 임시 상태 / 직렬화 불가 객체</span>\n    <span class=\"token comment\">// @IgnoredOnParcel 어노테이션을 사용하여 이 필드를 Parcelable 로직에서 제외합니다.</span>\n    <span class=\"token annotation builtin\">@delegate:IgnoredOnParcel</span> <span class=\"token comment\">// 프로퍼티 위임 시 사용</span>\n    <span class=\"token keyword\">val</span> tempCache<span class=\"token operator\">:</span> Map<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> Any<span class=\"token operator\">></span> <span class=\"token keyword\">by</span> lazy <span class=\"token punctuation\">{</span> \n        <span class=\"token comment\">// 무거운 초기화 로직...</span>\n        <span class=\"token function\">mutableMapOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// (IgnoredOnParcel 을 사용하지 않아도 제외 됨)</span>\n    <span class=\"token comment\">// 콜백 리스너: 보통 Parcelable로 전달할 수 없으므로 무시합니다.</span>\n    <span class=\"token annotation builtin\">@IgnoredOnParcel</span>\n    <span class=\"token keyword\">var</span> listener<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>마무리</h1>\n<p>더 자세한 내용을 알고 싶으면 <a href=\"https://developer.android.com/kotlin/parcelize\">공식 문서</a> 참고하시면 됩니다.</p>","frontmatter":{"title":"Parcelize Parcelable 을 편하게 사용하기","date":"November 24, 2025","description":"Parcelize 플러그인을 사용하여 Parcelable 구현을 자동으로하는 방법을 소개합니다.","tags":["android","parcelize","parcelable"],"featuredImage":null}},"previous":{"fields":{"slug":"/compose/05_Compose 내비게이션2 기본/"},"frontmatter":{"title":"::compose:: Navigation2 간단하게 살펴보기"}},"next":{"fields":{"slug":"/compose/04_Compose 단계 이해하기/"},"frontmatter":{"title":"::compose:: 컴포즈 단계 이해하기"}}},"pageContext":{"id":"e6f8ef79-e418-570d-a838-0274b1d186fd","previousPostId":"0b6a7e68-5ab3-5917-b48a-fa2e67160d08","nextPostId":"f0a7983e-3d29-51fd-a6ff-e055e5934f01"}},"staticQueryHashes":["2046863741","3000541721","3274528899"],"slicesMap":{}}