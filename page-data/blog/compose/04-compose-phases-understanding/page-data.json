{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/compose/04-compose-phases-understanding/","result":{"data":{"site":{"siteMetadata":{"title":"NiNyYoon"}},"markdownRemark":{"id":"11637042-72a8-5ca7-9ec0-e55bc1b95012","excerpt":"Jetpack Compose 단계 사용자한테 시각적인 UI가 보일 때까지 Jetpack Compose 는 3개의 주요 단계를 거치게 됩니다. 이는 컴포즈가 컴포저블 함수를 실행해서 UI 트리를 만드는 컴포지션 단계, UI…","html":"<h1 id=\"jetpack-compose-단계\" style=\"position:relative;\"><a href=\"#jetpack-compose-%EB%8B%A8%EA%B3%84\" aria-label=\"jetpack compose 단계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jetpack Compose 단계</h1>\n<p>사용자한테 시각적인 UI가 보일 때까지 Jetpack Compose 는 3개의 주요 단계를 거치게 됩니다.<br>\n이는<br>\n컴포즈가 컴포저블 함수를 실행해서 UI 트리를 만드는 <strong>컴포지션</strong> 단계,<br>\nUI 트리를 읽고 각 노드의 크기를 <em><strong>측정</strong></em> 하고 <em><strong>배치</strong></em> 하는 단계인 <strong>레이아웃</strong> 단계,<br>\n배치된 UI를 기기 화면에 그리는 단계인 <strong>그리기(Drawing)</strong> 단계가 있습니다.</p>\n<p><img src=\"/4210a11634c15fa4a3d8a4c829babb03/compose_phasesl.svg\" alt=\"compose_phases\"></p>\n<p>이러단 단계는 일반적으로 순서대로 진행하여 프레임을 생성합니다.\n하지만 BoxWithConstraints, LazyColumn, LazyRow은 예외로, 하위 요소의 컴포지션이 상위 요소의 레이아웃 단계에 따라 달라집니다.(이거는 나중에 분석해 보기로 합니다.)</p>\n<p>또한 컴포즈는 성능을 최적화하기 위해서 동일 데이터(State)가 변경될 때에는 이러한 단계를 최대한 스킵한다.</p>\n<h1 id=\"단계-과정-이해하기\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EA%B3%84-%EA%B3%BC%EC%A0%95-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0\" aria-label=\"단계 과정 이해하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단계 과정 이해하기</h1>\n<h2 id=\"1-컴포지션composition\" style=\"position:relative;\"><a href=\"#1-%EC%BB%B4%ED%8F%AC%EC%A7%80%EC%85%98composition\" aria-label=\"1 컴포지션composition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 컴포지션(Composition)</h2>\n<p>앞선 포스트 \"Compose 수명주기\" 에서도 여러번 설명한 <strong>컴포지션 단계</strong> 입니다.<br>\nCompose 런타임이 컴포저블 함수를 실행하고 <strong>UI 트리를 출력</strong> 합니다.</p>\n<blockquote>\n<p>(조금 자세히 찾아보니 컴포지션은 <strong>SlotTable</strong> 이라는 내부 구조에 UI 생성 로직과 데이터를 저장하며, 이 로직이 실행되어 <strong>LayoutNode</strong> 라는 실제 렌더링 및 레이아웃을 위한 UI 트리를 구성한다고 하는데... 나중에 자세히 알아보는걸로..)</p>\n</blockquote>\n<p><img src=\"/b718201101eb96d62180caac60eda1cd/compose_ui_tree.svg\" alt=\"compose_ui_tree\"></p>\n<h2 id=\"2-레이아웃layout\" style=\"position:relative;\"><a href=\"#2-%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83layout\" aria-label=\"2 레이아웃layout permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 레이아웃(Layout)</h2>\n<p>앞선 컴포지션 단계에서 생성된 UI 트리를 바탕으로 <strong>측정(measure)</strong>, <strong>배치(layout)</strong> 순서로 진행됩니다.<br>\n레이아웃 단계는 루트를 시작으로 3단계 알고리즘을 순회 합니다.</p>\n<ol>\n<li><strong>하위 요소 측정(Measure children)</strong>: 노드의 하위 요소가 있을 경우 하위 요소를 측정합니다.</li>\n<li><strong>자체 크기 결정(Decide own size)</strong>: 측정 값을 기반으로 노드가 자체 크기를 결정합니다.</li>\n<li><strong>하위 요소 배치(Place Children)</strong>: 각 하위 노드는 노드의 자체 위치를 기준으로 배치됩니다.</li>\n</ol>\n<p>이 단계가 끝나면 각 레이아웃 노드는 자체 크기(너비/높이), 위치(x/y좌표) 를 가지게 됩니다.</p>\n<p>아래의 UI 트리를 예를 들어서 설명해보면</p>\n<p><img src=\"/7fadac1cc524c2df55af501c4a81f4f4/layout_phase_tree_exam2.svg\" alt=\"layout_phase_tree\"></p>\n<h4 id=\"측정-및-크기-결정-단계\" style=\"position:relative;\"><a href=\"#%EC%B8%A1%EC%A0%95-%EB%B0%8F-%ED%81%AC%EA%B8%B0-%EA%B2%B0%EC%A0%95-%EB%8B%A8%EA%B3%84\" aria-label=\"측정 및 크기 결정 단계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>측정 및 크기 결정 단계</h4>\n<ul>\n<li><strong>1단계</strong>: Row가 하위 요소를 측정합니다.\n<ul>\n<li>Row는 자신의 하위 요소인 Image와 Column을 측정합니다. 이때 Row는 자신의 제약 조건을 각각의 하위 요소에 전달합니다.</li>\n</ul>\n</li>\n<li><strong>2단계</strong>: Image가 측정됩니다.\n<ul>\n<li>Image는 하위 요소가 없으므로 전달받은 제약 조건 내에서 자체 크기를 결정합니다.</li>\n<li>결정된 크기(너비와 높이)를 Row에 다시 보고합니다.</li>\n</ul>\n</li>\n<li><strong>3단계</strong>: Column이 측정됩니다.\n<ul>\n<li>Column은 다음에 측정됩니다. Column은 자신의 하위 요소 (Text1, Text2)를 측정해야만 자신의 크기를 결정할 수 있습니다.</li>\n<li>Column은 자신이 Row로부터 받은 제약 조건을 조정하여 하위 요소 (Text1, Text2)에 전달합니다.</li>\n</ul>\n</li>\n<li><strong>4단계</strong>: Text1과 Text2가 측정됩니다.\n<ul>\n<li>Text1이 먼저 측정됩니다. 하위 요소가 없으므로 전달받은 제약 조건 내에서 자체 크기를 결정하고 Column에 다시 보고합니다.</li>\n<li>Text2도 마찬가지로 측정되고 Column에 크기를 보고합니다.</li>\n</ul>\n</li>\n<li><strong>5단계</strong>: Column이 자체 크기를 결정합니다.\n<ul>\n<li>Column은 하위 요소 (Text1, Text2)로부터 보고받은 크기를 사용하여 자체 크기를 결정합니다.\n<ul>\n<li>너비: 하위 요소 중 가장 큰 너비를 자신의 너비로 사용합니다.</li>\n<li>높이: 하위 요소 높이의 합을 자신의 높이로 사용합니다.</li>\n</ul>\n</li>\n<li>결정된 최종 크기를 Row에 다시 보고합니다.</li>\n</ul>\n</li>\n<li><strong>6단계</strong>: Row가 자체 크기를 결정합니다.\n<ul>\n<li>Row는 하위 요소 (Image, Column)로부터 보고받은 크기를 사용하여 자체 크기를 결정합니다.\n<ul>\n<li>너비: 하위 요소 너위의 합을 자신의 너비로 사용합니다.</li>\n<li>높이: 하위 요소 중 가장 큰 높이를 자신의 높이로 사용합니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"배치-단계\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%B9%98-%EB%8B%A8%EA%B3%84\" aria-label=\"배치 단계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배치 단계</h4>\n<ul>\n<li><strong>7단계</strong>: Column이 하위 요소를 배치합니다.\n<ul>\n<li>Column은 Text1과 Text2를 자체에 상대적으로 세로로 서로 아래에 배치합니다.</li>\n</ul>\n</li>\n<li><strong>8단계</strong>: Row가 하위 요소를 배치합니다.\n<ul>\n<li>Row는 Image와 Column을 자체에 상대적으로 가로로 나란히 배치합니다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>💡 하위 요소의 최종 너비/높이는 Modifier.height(), Modifier.width(), Modifier.padding(), 그리고 상위 요소가 전달한 제약 조건 등 모든 <strong>수정자(Modifier)</strong> 의 영향을 받아 결정됩니다.</p>\n</blockquote>\n<h2 id=\"3-그리기drawing\" style=\"position:relative;\"><a href=\"#3-%EA%B7%B8%EB%A6%AC%EA%B8%B0drawing\" aria-label=\"3 그리기drawing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 그리기(Drawing)</h2>\n<p>그리기 단계는 UI 트리가 다시 위에서 아래로 순회하면서 각 노드가 차례로 그려지게 됩니다.</p>\n<p>아까의 레이아웃 단계의 예로 들면</p>\n<ol>\n<li>Row 의 배경색과 같은 컨텐츠를 그립니다.</li>\n<li>Image 가 자체적으로 그려집니다.</li>\n<li>Coloumn 이 자체적으로 그려집니다.</li>\n<li>Text1, Text2 가 각각 자체적으로 그려집니다.</li>\n</ol>","headings":[{"depth":1,"id":"jetpack-compose-단계","value":"Jetpack Compose 단계"},{"depth":1,"id":"단계-과정-이해하기","value":"단계 과정 이해하기"},{"depth":2,"id":"1-컴포지션composition","value":"1. 컴포지션(Composition)"},{"depth":2,"id":"2-레이아웃layout","value":"2. 레이아웃(Layout)"},{"depth":4,"id":"측정-및-크기-결정-단계","value":"측정 및 크기 결정 단계"},{"depth":4,"id":"배치-단계","value":"배치 단계"},{"depth":2,"id":"3-그리기drawing","value":"3. 그리기(Drawing)"}],"frontmatter":{"title":"::compose:: 컴포즈 단계 이해하기","date":"November 17, 2025","description":"제트팩 컴포즈의 단계(컴포지션-레이아웃-그리기) 에 대해 정리합니다.","tags":["android","jetpack compose","컴포즈 단계"],"featuredImage":null}},"previous":{"fields":{"slug":"/blog/android-etc/parcelize/"},"frontmatter":{"title":"Parcelize Parcelable 을 편하게 사용하기"}},"next":{"fields":{"slug":"/blog/compose/03-compose-side-effects/"},"frontmatter":{"title":"::compose:: Side-effect(부수효과) 개념"}}},"pageContext":{"id":"11637042-72a8-5ca7-9ec0-e55bc1b95012","previousPostId":"e6f8ef79-e418-570d-a838-0274b1d186fd","nextPostId":"875c2fb1-559e-5239-b803-064f21cc9dd4"}},"staticQueryHashes":["2046863741","3000541721","3274528899"],"slicesMap":{}}